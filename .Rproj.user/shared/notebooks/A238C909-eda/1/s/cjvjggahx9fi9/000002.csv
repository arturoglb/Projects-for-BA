"0",""
"0","Top5_gdp <- gdp_pivotlonger %>%"
"0","  group_by(Country.Code) %>%"
"0","  summarise(Average = mean(val, na.rm = TRUE)) %>%"
"0","  arrange(desc(Average)) %>%"
"0","  head(5) %>%"
"0","  left_join(gdp_pivotlonger, by = c(""Country.Code"")) %>%"
"0","  mutate(Country.Name = fct_reorder2(Country.Name, year, val)) %>%"
"0","  select(Country.Name, year, val) %>%"
"0","  pivot_wider(names_from = Country.Name, values_from = val)"
"0",""
"0","Top5_gdp_col <- colnames(Top5_gdp)"
"0","fig <- plot_ly()"
"0","fig <- fig %>% add_trace(x = ~Top5_gdp$year, "
"0","                         y = ~get(Top5_gdp_col[2],Top5_gdp), "
"0","                         name = Top5_gdp_col[2], mode = ""lines+markers"", "
"0","                         type = ""scatter"") %>%"
"0","               add_trace(x = ~Top5_gdp$year, "
"0","                         y = ~get(Top5_gdp_col[3],Top5_gdp), "
"0","                         name = Top5_gdp_col[3], mode = ""lines+markers"", "
"0","                         type = ""scatter"") %>%"
"0","              add_trace(x = ~Top5_gdp$year, "
"0","                        y = ~get(Top5_gdp_col[4],Top5_gdp), "
"0","                        name = Top5_gdp_col[4], mode = ""lines+markers"", "
"0","                        type = ""scatter"") %>%"
"0","              add_trace(x = ~Top5_gdp$year, "
"0","                        y = ~get(Top5_gdp_col[5],Top5_gdp), "
"0","                        name = Top5_gdp_col[5], mode = ""lines+markers"", "
"0","                        type = ""scatter"") %>%"
"0","               add_trace(x = ~Top5_gdp$year, "
"0","                         y = ~get(Top5_gdp_col[6],Top5_gdp), "
"0","                         name = Top5_gdp_col[6], mode = ""lines+markers"", "
"0","                         type = ""scatter"")"
"0",""
"0","#Set figure title, x and y-axes titles"
"0","fig %>% layout("
"0","  title = ""<b>Top 5 countries with highest average GDP per capita<b>"","
"0","  xaxis = list(title=""<b>Years<b>""),"
"0","  yaxis = list(title=""<b>GDP per capita (USD)</b>"")"
"0",")%>%"
"0","  layout(plot_bgcolor='#e5ecf6',"
"0","          xaxis = list("
"0","            zerolinecolor = '#ffff',"
"0","            zerolinewidth = 2,"
"0","            gridcolor = 'ffff'),"
"0","          yaxis = list("
"0","            zerolinecolor = '#ffff',"
"0","            zerolinewidth = 2,"
"0","            gridcolor = 'ffff')"
"0","          )"
